{"version":3,"file":"109.extension.js","mappings":"uHAEO,MAAMA,EAA0B,CACnCC,cAAa,IACF,KAEX,aAAAC,CAAcC,EAAMC,GAChB,KAAcD,GAAQE,QAAQC,QAAQF,EAC1C,EACAG,eAAc,IACH,IAEX,cAAAC,CAAeC,EAAIL,GACf,IAAeK,GAAML,CACzB,E,qHCbG,MCCMM,EAAc,CAACC,EAAO,CAAC,IAAMC,OAASC,sBAAuB,CAAC,KACvEF,EAAKG,QAAQC,MAAM,sDACnB,MAAMC,QAAiB,EAAAC,EAAA,GAAgBN,GACvC,MCAqCC,OAAOM,EAAaF,EAAUF,KACnE,MAAMK,EAAUH,EAASE,GACzB,IAAIF,EAASE,GAwBT,MAAM,IAAIE,EAAAC,EAAyB,WAAWH,mDAA8D,CACxGJ,WAzBmB,CACvB,MAAMQ,EAAoBH,EAA4B,mBACtD,QAA0BI,IAAtBD,EAkBA,MAAM,IAAIF,EAAAC,EAAyB,WAAWH,wCAAmD,CAAEJ,WAlBlE,CACjC,MAAMU,GAAc,IAAAC,WAAUzB,EAAA,GAAyBO,mBAAmBmB,MAAQ,EAAAA,MAClF,IACI,MAAM,OAAEC,SAAiBH,EAAYF,GACrC,IAAIM,EACJ,IACIA,EAAOC,KAAKC,MAAMH,EAAOI,OAC7B,CACA,MACI,MAAMC,MAAM,WAAWd,8CAC3B,CACA,MFnB8B,EAACA,EAAaU,EAAMZ,KAC9D,GAAqB,IAAjBY,EAAKK,QACL,MAAMD,MAAM,WAAWd,kDAE3B,QAAyBK,IAArBK,EAAKM,kBAAsDX,IAAzBK,EAAKO,gBACvC,MAAMH,MAAM,WAAWd,sDAE3B,GAAIU,EAAKQ,WAAY,CACjB,MAAMC,EAAc,IAAIC,KAExB,GADmB,IAAIA,KAAKV,EAAKQ,YAChBC,EACb,MAAML,MAAM,WAAWd,qDAE/B,CACA,IAAIqB,EAAYX,EAAKY,WAChBD,GAAavB,IAAWE,IAAcuB,iBACvCF,EAAYvB,EAASE,GAAauB,gBAEtC,MAAMC,EAAc,CAChBC,YAAaf,EAAKM,YAClBU,gBAAiBhB,EAAKO,mBAClBP,EAAKiB,cAAgB,CAAEC,aAAclB,EAAKiB,iBAC1CjB,EAAKQ,YAAc,CAAEW,WAAY,IAAIT,KAAKV,EAAKQ,gBAC/CR,EAAKoB,iBAAmB,CAAEC,gBAAiBrB,EAAKoB,oBAChDT,GAAa,CAAEA,cAGvB,OADA,EAAAW,EAAA,GAAqBR,EAAa,sBAAuB,KAClDA,GERYS,CAA+BjC,EAAaU,EAAMZ,EAC7D,CACA,MAAOoC,GACH,MAAM,IAAIhC,EAAAC,EAAyB+B,EAAMC,QAAS,CAAEvC,UACxD,CACJ,CAIJ,GDxBOwC,EAA0B,EAAAC,EAAA,IAAe,CAC5CpC,QAASR,EAAKQ,SAAWN,GAAoBM,UAC7CH,EAAUL,EAAKG,Q","sources":["webpack://writedot/./node_modules/@smithy/shared-ini-file-loader/dist-es/externalDataInterceptor.js","webpack://writedot/./node_modules/@aws-sdk/credential-provider-process/dist-es/getValidatedProcessCredentials.js","webpack://writedot/./node_modules/@aws-sdk/credential-provider-process/dist-es/fromProcess.js","webpack://writedot/./node_modules/@aws-sdk/credential-provider-process/dist-es/resolveProcessCredentials.js"],"sourcesContent":["import { tokenIntercept } from \"./getSSOTokenFromFile\";\nimport { fileIntercept } from \"./readFile\";\nexport const externalDataInterceptor = {\n    getFileRecord() {\n        return fileIntercept;\n    },\n    interceptFile(path, contents) {\n        fileIntercept[path] = Promise.resolve(contents);\n    },\n    getTokenRecord() {\n        return tokenIntercept;\n    },\n    interceptToken(id, contents) {\n        tokenIntercept[id] = contents;\n    },\n};\n","import { setCredentialFeature } from \"@aws-sdk/core/client\";\nexport const getValidatedProcessCredentials = (profileName, data, profiles) => {\n    if (data.Version !== 1) {\n        throw Error(`Profile ${profileName} credential_process did not return Version 1.`);\n    }\n    if (data.AccessKeyId === undefined || data.SecretAccessKey === undefined) {\n        throw Error(`Profile ${profileName} credential_process returned invalid credentials.`);\n    }\n    if (data.Expiration) {\n        const currentTime = new Date();\n        const expireTime = new Date(data.Expiration);\n        if (expireTime < currentTime) {\n            throw Error(`Profile ${profileName} credential_process returned expired credentials.`);\n        }\n    }\n    let accountId = data.AccountId;\n    if (!accountId && profiles?.[profileName]?.aws_account_id) {\n        accountId = profiles[profileName].aws_account_id;\n    }\n    const credentials = {\n        accessKeyId: data.AccessKeyId,\n        secretAccessKey: data.SecretAccessKey,\n        ...(data.SessionToken && { sessionToken: data.SessionToken }),\n        ...(data.Expiration && { expiration: new Date(data.Expiration) }),\n        ...(data.CredentialScope && { credentialScope: data.CredentialScope }),\n        ...(accountId && { accountId }),\n    };\n    setCredentialFeature(credentials, \"CREDENTIALS_PROCESS\", \"w\");\n    return credentials;\n};\n","import { getProfileName, parseKnownFiles } from \"@smithy/shared-ini-file-loader\";\nimport { resolveProcessCredentials } from \"./resolveProcessCredentials\";\nexport const fromProcess = (init = {}) => async ({ callerClientConfig } = {}) => {\n    init.logger?.debug(\"@aws-sdk/credential-provider-process - fromProcess\");\n    const profiles = await parseKnownFiles(init);\n    return resolveProcessCredentials(getProfileName({\n        profile: init.profile ?? callerClientConfig?.profile,\n    }), profiles, init.logger);\n};\n","import { CredentialsProviderError } from \"@smithy/property-provider\";\nimport { externalDataInterceptor } from \"@smithy/shared-ini-file-loader\";\nimport { exec } from \"child_process\";\nimport { promisify } from \"util\";\nimport { getValidatedProcessCredentials } from \"./getValidatedProcessCredentials\";\nexport const resolveProcessCredentials = async (profileName, profiles, logger) => {\n    const profile = profiles[profileName];\n    if (profiles[profileName]) {\n        const credentialProcess = profile[\"credential_process\"];\n        if (credentialProcess !== undefined) {\n            const execPromise = promisify(externalDataInterceptor?.getTokenRecord?.().exec ?? exec);\n            try {\n                const { stdout } = await execPromise(credentialProcess);\n                let data;\n                try {\n                    data = JSON.parse(stdout.trim());\n                }\n                catch {\n                    throw Error(`Profile ${profileName} credential_process returned invalid JSON.`);\n                }\n                return getValidatedProcessCredentials(profileName, data, profiles);\n            }\n            catch (error) {\n                throw new CredentialsProviderError(error.message, { logger });\n            }\n        }\n        else {\n            throw new CredentialsProviderError(`Profile ${profileName} did not contain credential_process.`, { logger });\n        }\n    }\n    else {\n        throw new CredentialsProviderError(`Profile ${profileName} could not be found in shared credentials file.`, {\n            logger,\n        });\n    }\n};\n"],"names":["externalDataInterceptor","getFileRecord","interceptFile","path","contents","Promise","resolve","getTokenRecord","interceptToken","id","fromProcess","init","async","callerClientConfig","logger","debug","profiles","parseKnownFiles","profileName","profile","CredentialsProviderError","C","credentialProcess","undefined","execPromise","promisify","exec","stdout","data","JSON","parse","trim","Error","Version","AccessKeyId","SecretAccessKey","Expiration","currentTime","Date","accountId","AccountId","aws_account_id","credentials","accessKeyId","secretAccessKey","SessionToken","sessionToken","expiration","CredentialScope","credentialScope","setCredentialFeature","getValidatedProcessCredentials","error","message","resolveProcessCredentials","getProfileName"],"ignoreList":[],"sourceRoot":""}