"use strict";exports.id=563,exports.ids=[563],exports.modules={2563:(e,t,s)=>{s.d(t,{GetRoleCredentialsCommand:()=>F,SSOClient:()=>ut});var o=s(6768),n=s(1698),r=s(4957);const i={UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}};var a=s(2809),c=s(4384);class u extends c.T{constructor(e){super(e),Object.setPrototypeOf(this,u.prototype)}}class d extends u{name="InvalidRequestException";$fault="client";constructor(e){super({name:"InvalidRequestException",$fault:"client",...e}),Object.setPrototypeOf(this,d.prototype)}}class p extends u{name="ResourceNotFoundException";$fault="client";constructor(e){super({name:"ResourceNotFoundException",$fault:"client",...e}),Object.setPrototypeOf(this,p.prototype)}}class l extends u{name="TooManyRequestsException";$fault="client";constructor(e){super({name:"TooManyRequestsException",$fault:"client",...e}),Object.setPrototypeOf(this,l.prototype)}}class h extends u{name="UnauthorizedException";$fault="client";constructor(e){super({name:"UnauthorizedException",$fault:"client",...e}),Object.setPrototypeOf(this,h.prototype)}}const m=e=>({...e,...e.accessToken&&{accessToken:a.$}}),g=e=>({...e,...e.secretAccessKey&&{secretAccessKey:a.$},...e.sessionToken&&{sessionToken:a.$}}),f=e=>({...e,...e.roleCredentials&&{roleCredentials:g(e.roleCredentials)}});var y=s(1919),v=s(9212),k=s(1226),w=s(212),b=s(6460),A=s(7268),S=s(2967);const E=async(e,t)=>{const s=(0,v.l)(e,t),o=(0,k.Tj)({},w.e,{[M]:e[j]});s.bp("/federation/credentials");const n=(0,k.Tj)({[z]:[,(0,b.Y0)(e[N],"roleName")],[D]:[,(0,b.Y0)(e[$],"accountId")]});return s.m("GET").h(o).q(n).b(void 0),s.build()},T=async(e,t)=>{if(200!==e.statusCode&&e.statusCode>=300)return P(e,t);const s=(0,k.Tj)({$metadata:O(e)}),o=(0,b.Y0)((0,b.Xk)(await(0,y.Y2)(e.body,t)),"body"),n=(0,k.s)(o,{roleCredentials:A.S});return Object.assign(s,n),s},P=async(e,t)=>{const s={...e,body:await(0,y.CG)(e.body,t)},o=(0,y.cJ)(e,s.body);switch(o){case"InvalidRequestException":case"com.amazonaws.sso#InvalidRequestException":throw await I(s,t);case"ResourceNotFoundException":case"com.amazonaws.sso#ResourceNotFoundException":throw await q(s,t);case"TooManyRequestsException":case"com.amazonaws.sso#TooManyRequestsException":throw await R(s,t);case"UnauthorizedException":case"com.amazonaws.sso#UnauthorizedException":throw await C(s,t);default:const n=s.body;return x({output:e,parsedBody:n,errorCode:o})}},x=(0,S.j)(u),I=async(e,t)=>{const s=(0,k.Tj)({}),o=e.body,n=(0,k.s)(o,{message:b.lK});Object.assign(s,n);const r=new d({$metadata:O(e),...s});return(0,c.M)(r,e.body)},q=async(e,t)=>{const s=(0,k.Tj)({}),o=e.body,n=(0,k.s)(o,{message:b.lK});Object.assign(s,n);const r=new p({$metadata:O(e),...s});return(0,c.M)(r,e.body)},R=async(e,t)=>{const s=(0,k.Tj)({}),o=e.body,n=(0,k.s)(o,{message:b.lK});Object.assign(s,n);const r=new l({$metadata:O(e),...s});return(0,c.M)(r,e.body)},C=async(e,t)=>{const s=(0,k.Tj)({}),o=e.body,n=(0,k.s)(o,{message:b.lK});Object.assign(s,n);const r=new h({$metadata:O(e),...s});return(0,c.M)(r,e.body)},O=e=>({httpStatusCode:e.statusCode,requestId:e.headers["x-amzn-requestid"]??e.headers["x-amzn-request-id"]??e.headers["x-amz-request-id"],extendedRequestId:e.headers["x-amz-id-2"],cfId:e.headers["x-amz-cf-id"]}),$="accountId",j="accessToken",D="account_id",N="roleName",z="role_name",M="x-amz-sso_bearer_token";class F extends(r.u.classBuilder().ep(i).m(function(e,t,s,r){return[(0,n.TM)(s,this.serialize,this.deserialize),(0,o.r)(s,e.getEndpointParameterInstructions())]}).s("SWBPortalService","GetRoleCredentials",{}).n("SSOClient","GetRoleCredentialsCommand").f(m,f).ser(E).de(T).build()){}var U=s(1095),H=s(7813),K=s(8879),W=s(7287),L=s(8059),G=s(4014),Z=s(2404),V=s(612),Y=s(5172),_=s(649),B=s(2795),J=s(5963),X=s(9774),Q=s(7821),ee=s(7389),te=s(6116),se=s(8947);const oe=async(e,t,s)=>({operation:(0,te.u)(t).operation,region:await(0,se.t)(e.region)()||(()=>{throw new Error("expected `region` to be configured for `aws.auth#sigv4`")})()}),ne=e=>{const t=[];switch(e.operation){case"GetRoleCredentials":case"ListAccountRoles":case"ListAccounts":case"Logout":t.push({schemeId:"smithy.api#noAuth"});break;default:t.push(function(e){return{schemeId:"aws.auth#sigv4",signingProperties:{name:"awsssoportal",region:e.region},propertiesExtractor:(e,t)=>({signingProperties:{config:e,context:t}})}}(e))}return t};var re=s(5122),ie=s(4653),ae=s(8246),ce=s(9915),ue=s(4836),de=s(2184),pe=s(4570),le=s(1701),he=s(4013),me=s(4649),ge=s(5178),fe=s(1482),ye=s(7355),ve=s(6228),ke=s(5536),we=s(4098),be=s(2641),Ae=s(1395),Se=s(9718),Ee=s(7459),Te=s(7638),Pe=s(643),xe=s(7461),Ie=s(3062),qe=s(468);const Re="required",Ce="fn",Oe="argv",$e="ref",je=!0,De="isSet",Ne="booleanEquals",ze="error",Me="endpoint",Fe="tree",Ue="PartitionResult",He="getAttr",Ke={[Re]:!1,type:"string"},We={[Re]:!0,default:!1,type:"boolean"},Le={[$e]:"Endpoint"},Ge={[Ce]:Ne,[Oe]:[{[$e]:"UseFIPS"},!0]},Ze={[Ce]:Ne,[Oe]:[{[$e]:"UseDualStack"},!0]},Ve={},Ye={[Ce]:He,[Oe]:[{[$e]:Ue},"supportsFIPS"]},_e={[$e]:Ue},Be={[Ce]:Ne,[Oe]:[!0,{[Ce]:He,[Oe]:[_e,"supportsDualStack"]}]},Je=[Ge],Xe=[Ze],Qe=[{[$e]:"Region"}],et={version:"1.0",parameters:{Region:Ke,UseDualStack:We,UseFIPS:We,Endpoint:Ke},rules:[{conditions:[{[Ce]:De,[Oe]:[Le]}],rules:[{conditions:Je,error:"Invalid Configuration: FIPS and custom endpoint are not supported",type:ze},{conditions:Xe,error:"Invalid Configuration: Dualstack and custom endpoint are not supported",type:ze},{endpoint:{url:Le,properties:Ve,headers:Ve},type:Me}],type:Fe},{conditions:[{[Ce]:De,[Oe]:Qe}],rules:[{conditions:[{[Ce]:"aws.partition",[Oe]:Qe,assign:Ue}],rules:[{conditions:[Ge,Ze],rules:[{conditions:[{[Ce]:Ne,[Oe]:[je,Ye]},Be],rules:[{endpoint:{url:"https://portal.sso-fips.{Region}.{PartitionResult#dualStackDnsSuffix}",properties:Ve,headers:Ve},type:Me}],type:Fe},{error:"FIPS and DualStack are enabled, but this partition does not support one or both",type:ze}],type:Fe},{conditions:Je,rules:[{conditions:[{[Ce]:Ne,[Oe]:[Ye,je]}],rules:[{conditions:[{[Ce]:"stringEquals",[Oe]:[{[Ce]:He,[Oe]:[_e,"name"]},"aws-us-gov"]}],endpoint:{url:"https://portal.sso.{Region}.amazonaws.com",properties:Ve,headers:Ve},type:Me},{endpoint:{url:"https://portal.sso-fips.{Region}.{PartitionResult#dnsSuffix}",properties:Ve,headers:Ve},type:Me}],type:Fe},{error:"FIPS is enabled but this partition does not support FIPS",type:ze}],type:Fe},{conditions:Xe,rules:[{conditions:[Be],rules:[{endpoint:{url:"https://portal.sso.{Region}.{PartitionResult#dualStackDnsSuffix}",properties:Ve,headers:Ve},type:Me}],type:Fe},{error:"DualStack is enabled but this partition does not support DualStack",type:ze}],type:Fe},{endpoint:{url:"https://portal.sso.{Region}.{PartitionResult#dnsSuffix}",properties:Ve,headers:Ve},type:Me}],type:Fe}],type:Fe},{error:"Invalid Configuration: Missing Region",type:ze}]},tt=new xe.k({size:50,params:["Endpoint","Region","UseDualStack","UseFIPS"]}),st=(e,t={})=>tt.get(e,()=>(0,Ie.s)(et,{endpointParams:e,logger:t.logger}));qe.m.aws=Pe.UF;var ot=s(666),nt=s(1620),rt=s(2339);var it=s(4163),at=s(2927),ct=s(9984);class ut extends Q.K{config;constructor(...[e]){const t=(e=>{(0,rt.I)(process.version);const t=(0,nt.I)(e),s=()=>t().then(ot.l),o=(e=>({apiVersion:"2019-06-10",base64Decoder:e?.base64Decoder??Ae.E,base64Encoder:e?.base64Encoder??Se.n,disableHostPrefix:e?.disableHostPrefix??!1,endpointProvider:e?.endpointProvider??st,extensions:e?.extensions??[],httpAuthSchemeProvider:e?.httpAuthSchemeProvider??ne,httpAuthSchemes:e?.httpAuthSchemes??[{schemeId:"aws.auth#sigv4",identityProvider:e=>e.getIdentityProvider("aws.auth#sigv4"),signer:new ve.f2},{schemeId:"smithy.api#noAuth",identityProvider:e=>e.getIdentityProvider("smithy.api#noAuth")||(async()=>({})),signer:new ke.m}],logger:e?.logger??new we.N,serviceId:e?.serviceId??"SSO",urlParser:e?.urlParser??be.D,utf8Decoder:e?.utf8Decoder??Ee.a,utf8Encoder:e?.utf8Encoder??Te.P}))(e);(0,re.I)(process.version);const n={profile:e?.profile,logger:o.logger};return{...o,...e,runtime:"node",defaultsMode:t,authSchemePreference:e?.authSchemePreference??(0,he.Z)(ie.$,n),bodyLengthChecker:e?.bodyLengthChecker??fe.n,defaultUserAgentProvider:e?.defaultUserAgentProvider??(0,ae.pf)({serviceId:o.serviceId,clientVersion:"3.928.0"}),maxAttempts:e?.maxAttempts??(0,he.Z)(J.qs,e),region:e?.region??(0,he.Z)(ue.GG,{...ue.zH,...n}),requestHandler:me.$.create(e?.requestHandler??s),retryMode:e?.retryMode??(0,he.Z)({...J.kN,default:async()=>(await s()).retryMode||ye.L0},e),sha256:e?.sha256??le.V.bind(null,"sha256"),streamCollector:e?.streamCollector??ge.k,useDualstackEndpoint:e?.useDualstackEndpoint??(0,he.Z)(de.e$,n),useFipsEndpoint:e?.useFipsEndpoint??(0,he.Z)(pe.Ko,n),userAgentAppId:e?.userAgentAppId??(0,he.Z)(ce.hV,n)}})(e||{});super(t),this.initConfig=t;const s=(o=t,Object.assign(o,{useDualstackEndpoint:o.useDualstackEndpoint??!1,useFipsEndpoint:o.useFipsEndpoint??!1,defaultSigningName:"awsssoportal"}));var o;const n=(0,W.D)(s),r=(0,J.$z)(n),i=(0,G.T)(r),a=(0,U.OV)(i),c=((e,t)=>{const s=Object.assign((0,it.R)(e),(0,ct.xA)(e),(0,at.e)(e),(e=>{const t=e.httpAuthSchemes;let s=e.httpAuthSchemeProvider,o=e.credentials;return{setHttpAuthScheme(e){const s=t.findIndex(t=>t.schemeId===e.schemeId);-1===s?t.push(e):t.splice(s,1,e)},httpAuthSchemes:()=>t,setHttpAuthSchemeProvider(e){s=e},httpAuthSchemeProvider:()=>s,setCredentials(e){o=e},credentials:()=>o}})(e));return t.forEach(e=>e.configure(s)),Object.assign(e,(0,it.$)(s),(0,ct.uv)(s),(0,at.j)(s),{httpAuthSchemes:(o=s).httpAuthSchemes(),httpAuthSchemeProvider:o.httpAuthSchemeProvider(),credentials:o.credentials()});var o})((e=>{const t=(0,ee.h)(e);return Object.assign(t,{authSchemePreference:(0,se.t)(e.authSchemePreference??[])})})((0,B.C)(a)),e?.extensions||[]);this.config=c,this.middlewareStack.use((0,L.sM)(this.config)),this.middlewareStack.use((0,X.ey)(this.config)),this.middlewareStack.use((0,_.vK)(this.config)),this.middlewareStack.use((0,U.TC)(this.config)),this.middlewareStack.use((0,H.Y7)(this.config)),this.middlewareStack.use((0,K.n)(this.config)),this.middlewareStack.use((0,Z.w)(this.config,{httpAuthSchemeParametersProvider:oe,identityProviderConfigProvider:async e=>new V.h({"aws.auth#sigv4":e.credentials})})),this.middlewareStack.use((0,Y.l)(this.config))}destroy(){super.destroy()}}},4649:(e,t,s)=>{s.d(t,{$:()=>p});var o=s(4094),n=s(5901),r=s(8611),i=s(5692);const a=["ECONNRESET","EPIPE","ETIMEDOUT"];var c=s(6035),u=s(7260),d=s(3360);class p{config;configProvider;socketWarningTimestamp=0;externalAgent=!1;metadata={handlerProtocol:"http/1.1"};static create(e){return"function"==typeof e?.handle?e:new p(e)}static checkSocketUsage(e,t,s=console){const{sockets:o,requests:n,maxSockets:r}=e;if("number"!=typeof r||r===1/0)return t;if(Date.now()-15e3<t)return t;if(o&&n)for(const e in o){const t=o[e]?.length??0,i=n[e]?.length??0;if(t>=r&&i>=2*r)return s?.warn?.(`@smithy/node-http-handler:WARN - socket usage at capacity=${t} and ${i} additional requests are enqueued.\nSee https://docs.aws.amazon.com/sdk-for-javascript/v3/developer-guide/node-configuring-maxsockets.html\nor increase socketAcquisitionWarningTimeout=(millis) in the NodeHttpHandler config.`),Date.now()}return t}constructor(e){this.configProvider=new Promise((t,s)=>{"function"==typeof e?e().then(e=>{t(this.resolveDefaultConfig(e))}).catch(s):t(this.resolveDefaultConfig(e))})}resolveDefaultConfig(e){const{requestTimeout:t,connectionTimeout:s,socketTimeout:o,socketAcquisitionWarningTimeout:n,httpAgent:a,httpsAgent:c,throwOnRequestTimeout:u}=e||{},d=!0;return{connectionTimeout:s,requestTimeout:t,socketTimeout:o,socketAcquisitionWarningTimeout:n,throwOnRequestTimeout:u,httpAgent:(()=>a instanceof r.Agent||"function"==typeof a?.destroy?(this.externalAgent=!0,a):new r.Agent({keepAlive:d,maxSockets:50,...a}))(),httpsAgent:(()=>c instanceof i.Agent||"function"==typeof c?.destroy?(this.externalAgent=!0,c):new i.Agent({keepAlive:d,maxSockets:50,...c}))(),logger:console}}destroy(){this.config?.httpAgent?.destroy(),this.config?.httpsAgent?.destroy()}async handle(e,{abortSignal:t,requestTimeout:s}={}){return this.config||(this.config=await this.configProvider),new Promise((l,h)=>{const m=this.config;let g;const f=[],y=async e=>{await g,f.forEach(u.N.clearTimeout),h(e)};if(t?.aborted){const e=new Error("Request aborted");return e.name="AbortError",void y(e)}const v="https:"===e.protocol,k=e.headers??{},w="100-continue"===(k.Expect??k.expect);let b=v?m.httpsAgent:m.httpAgent;w&&!this.externalAgent&&(b=new(v?i.Agent:r.Agent)({keepAlive:!1,maxSockets:1/0})),f.push(u.N.setTimeout(()=>{this.socketWarningTimestamp=p.checkSocketUsage(b,this.socketWarningTimestamp,m.logger)},m.socketAcquisitionWarningTimeout??(m.requestTimeout??2e3)+(m.connectionTimeout??1e3)));const A=(0,n.G)(e.query||{});let S;null==e.username&&null==e.password||(S=`${e.username??""}:${e.password??""}`);let E=e.path;A&&(E+=`?${A}`),e.fragment&&(E+=`#${e.fragment}`);let T=e.hostname??"";T="["===T[0]&&T.endsWith("]")?e.hostname.slice(1,-1):e.hostname;const P={headers:e.headers,host:T,method:e.method,path:E,port:e.port,agent:b,auth:S},x=(v?i.request:r.request)(P,e=>{(async e=>{await g,f.forEach(u.N.clearTimeout),l(e)})({response:new o.c({statusCode:e.statusCode||-1,reason:e.statusMessage,headers:(0,c.u)(e.headers),body:e})})});if(x.on("error",e=>{a.includes(e.code)?y(Object.assign(e,{name:"TimeoutError"})):y(e)}),t){const e=()=>{x.destroy();const e=new Error("Request aborted");e.name="AbortError",y(e)};if("function"==typeof t.addEventListener){const s=t;s.addEventListener("abort",e,{once:!0}),x.once("close",()=>s.removeEventListener("abort",e))}else t.onabort=e}const I=s??m.requestTimeout;f.push(((e,t,s=0)=>{if(!s)return-1;const o=o=>{const n=u.N.setTimeout(()=>{e.destroy(),t(Object.assign(new Error(`@smithy/node-http-handler - the request socket did not establish a connection with the server within the configured timeout of ${s} ms.`),{name:"TimeoutError"}))},s-o),r=e=>{e?.connecting?e.on("connect",()=>{u.N.clearTimeout(n)}):u.N.clearTimeout(n)};e.socket?r(e.socket):e.on("socket",r)};return s<2e3?(o(0),0):u.N.setTimeout(o.bind(null,1e3),1e3)})(x,y,m.connectionTimeout)),f.push(((e,t,s=0,o,n)=>s?u.N.setTimeout(()=>{let r=`@smithy/node-http-handler - [${o?"ERROR":"WARN"}] a request has exceeded the configured ${s} ms requestTimeout.`;if(o){const s=Object.assign(new Error(r),{name:"TimeoutError",code:"ETIMEDOUT"});e.destroy(s),t(s)}else r+=" Init client requestHandler with throwOnRequestTimeout=true to turn this into an error.",n?.warn?.(r)},s):-1)(x,y,I,m.throwOnRequestTimeout,m.logger??console)),f.push(((e,t,s=0)=>{const o=o=>{const n=s-o,r=()=>{e.destroy(),t(Object.assign(new Error(`@smithy/node-http-handler - the request socket timed out after ${s} ms of inactivity (configured by client requestHandler).`),{name:"TimeoutError"}))};e.socket?(e.socket.setTimeout(n,r),e.on("close",()=>e.socket?.removeListener("timeout",r))):e.setTimeout(n,r)};return 0<s&&s<6e3?(o(0),0):u.N.setTimeout(o.bind(null,0===s?0:3e3),3e3)})(x,y,m.socketTimeout));const q=P.agent;"object"==typeof q&&"keepAlive"in q&&f.push(((e,{keepAlive:t,keepAliveMsecs:s},o=3e3)=>{if(!0!==t)return-1;const n=()=>{e.socket?e.socket.setKeepAlive(t,s||0):e.on("socket",e=>{e.setKeepAlive(t,s||0)})};return 0===o?(n(),0):u.N.setTimeout(n,o)})(x,{keepAlive:q.keepAlive,keepAliveMsecs:q.keepAliveMsecs})),g=(0,d.f)(x,e,I,this.externalAgent).catch(e=>(f.forEach(u.N.clearTimeout),h(e)))})}updateHttpClientConfig(e,t){this.config=void 0,this.configProvider=this.configProvider.then(s=>({...s,[e]:t}))}httpHandlerConfigs(){return this.config??{}}}},5536:(e,t,s)=>{s.d(t,{m:()=>o});class o{async sign(e,t,s){return e}}}};