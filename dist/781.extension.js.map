{"version":3,"file":"781.extension.js","mappings":"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","sources":["webpack://writedot/./node_modules/@aws-sdk/credential-provider-sso/dist-es/resolveSSOCredentials.js","webpack://writedot/./node_modules/@aws-sdk/credential-provider-sso/dist-es/fromSSO.js","webpack://writedot/./node_modules/@aws-sdk/credential-provider-sso/dist-es/isSsoProfile.js","webpack://writedot/./node_modules/@aws-sdk/credential-provider-sso/dist-es/validateSsoProfile.js"],"sourcesContent":["import { setCredentialFeature } from \"@aws-sdk/core/client\";\nimport { fromSso as getSsoTokenProvider } from \"@aws-sdk/token-providers\";\nimport { CredentialsProviderError } from \"@smithy/property-provider\";\nimport { getSSOTokenFromFile } from \"@smithy/shared-ini-file-loader\";\nconst SHOULD_FAIL_CREDENTIAL_CHAIN = false;\nexport const resolveSSOCredentials = async ({ ssoStartUrl, ssoSession, ssoAccountId, ssoRegion, ssoRoleName, ssoClient, clientConfig, parentClientConfig, profile, filepath, configFilepath, ignoreCache, logger, }) => {\n    let token;\n    const refreshMessage = `To refresh this SSO session run aws sso login with the corresponding profile.`;\n    if (ssoSession) {\n        try {\n            const _token = await getSsoTokenProvider({\n                profile,\n                filepath,\n                configFilepath,\n                ignoreCache,\n            })();\n            token = {\n                accessToken: _token.token,\n                expiresAt: new Date(_token.expiration).toISOString(),\n            };\n        }\n        catch (e) {\n            throw new CredentialsProviderError(e.message, {\n                tryNextLink: SHOULD_FAIL_CREDENTIAL_CHAIN,\n                logger,\n            });\n        }\n    }\n    else {\n        try {\n            token = await getSSOTokenFromFile(ssoStartUrl);\n        }\n        catch (e) {\n            throw new CredentialsProviderError(`The SSO session associated with this profile is invalid. ${refreshMessage}`, {\n                tryNextLink: SHOULD_FAIL_CREDENTIAL_CHAIN,\n                logger,\n            });\n        }\n    }\n    if (new Date(token.expiresAt).getTime() - Date.now() <= 0) {\n        throw new CredentialsProviderError(`The SSO session associated with this profile has expired. ${refreshMessage}`, {\n            tryNextLink: SHOULD_FAIL_CREDENTIAL_CHAIN,\n            logger,\n        });\n    }\n    const { accessToken } = token;\n    const { SSOClient, GetRoleCredentialsCommand } = await import(\"./loadSso\");\n    const sso = ssoClient ||\n        new SSOClient(Object.assign({}, clientConfig ?? {}, {\n            logger: clientConfig?.logger ?? parentClientConfig?.logger,\n            region: clientConfig?.region ?? ssoRegion,\n            userAgentAppId: clientConfig?.userAgentAppId ?? parentClientConfig?.userAgentAppId,\n        }));\n    let ssoResp;\n    try {\n        ssoResp = await sso.send(new GetRoleCredentialsCommand({\n            accountId: ssoAccountId,\n            roleName: ssoRoleName,\n            accessToken,\n        }));\n    }\n    catch (e) {\n        throw new CredentialsProviderError(e, {\n            tryNextLink: SHOULD_FAIL_CREDENTIAL_CHAIN,\n            logger,\n        });\n    }\n    const { roleCredentials: { accessKeyId, secretAccessKey, sessionToken, expiration, credentialScope, accountId } = {}, } = ssoResp;\n    if (!accessKeyId || !secretAccessKey || !sessionToken || !expiration) {\n        throw new CredentialsProviderError(\"SSO returns an invalid temporary credential.\", {\n            tryNextLink: SHOULD_FAIL_CREDENTIAL_CHAIN,\n            logger,\n        });\n    }\n    const credentials = {\n        accessKeyId,\n        secretAccessKey,\n        sessionToken,\n        expiration: new Date(expiration),\n        ...(credentialScope && { credentialScope }),\n        ...(accountId && { accountId }),\n    };\n    if (ssoSession) {\n        setCredentialFeature(credentials, \"CREDENTIALS_SSO\", \"s\");\n    }\n    else {\n        setCredentialFeature(credentials, \"CREDENTIALS_SSO_LEGACY\", \"u\");\n    }\n    return credentials;\n};\n","import { CredentialsProviderError } from \"@smithy/property-provider\";\nimport { getProfileName, loadSsoSessionData, parseKnownFiles } from \"@smithy/shared-ini-file-loader\";\nimport { isSsoProfile } from \"./isSsoProfile\";\nimport { resolveSSOCredentials } from \"./resolveSSOCredentials\";\nimport { validateSsoProfile } from \"./validateSsoProfile\";\nexport const fromSSO = (init = {}) => async ({ callerClientConfig } = {}) => {\n    init.logger?.debug(\"@aws-sdk/credential-provider-sso - fromSSO\");\n    const { ssoStartUrl, ssoAccountId, ssoRegion, ssoRoleName, ssoSession } = init;\n    const { ssoClient } = init;\n    const profileName = getProfileName({\n        profile: init.profile ?? callerClientConfig?.profile,\n    });\n    if (!ssoStartUrl && !ssoAccountId && !ssoRegion && !ssoRoleName && !ssoSession) {\n        const profiles = await parseKnownFiles(init);\n        const profile = profiles[profileName];\n        if (!profile) {\n            throw new CredentialsProviderError(`Profile ${profileName} was not found.`, { logger: init.logger });\n        }\n        if (!isSsoProfile(profile)) {\n            throw new CredentialsProviderError(`Profile ${profileName} is not configured with SSO credentials.`, {\n                logger: init.logger,\n            });\n        }\n        if (profile?.sso_session) {\n            const ssoSessions = await loadSsoSessionData(init);\n            const session = ssoSessions[profile.sso_session];\n            const conflictMsg = ` configurations in profile ${profileName} and sso-session ${profile.sso_session}`;\n            if (ssoRegion && ssoRegion !== session.sso_region) {\n                throw new CredentialsProviderError(`Conflicting SSO region` + conflictMsg, {\n                    tryNextLink: false,\n                    logger: init.logger,\n                });\n            }\n            if (ssoStartUrl && ssoStartUrl !== session.sso_start_url) {\n                throw new CredentialsProviderError(`Conflicting SSO start_url` + conflictMsg, {\n                    tryNextLink: false,\n                    logger: init.logger,\n                });\n            }\n            profile.sso_region = session.sso_region;\n            profile.sso_start_url = session.sso_start_url;\n        }\n        const { sso_start_url, sso_account_id, sso_region, sso_role_name, sso_session } = validateSsoProfile(profile, init.logger);\n        return resolveSSOCredentials({\n            ssoStartUrl: sso_start_url,\n            ssoSession: sso_session,\n            ssoAccountId: sso_account_id,\n            ssoRegion: sso_region,\n            ssoRoleName: sso_role_name,\n            ssoClient: ssoClient,\n            clientConfig: init.clientConfig,\n            parentClientConfig: init.parentClientConfig,\n            profile: profileName,\n            filepath: init.filepath,\n            configFilepath: init.configFilepath,\n            ignoreCache: init.ignoreCache,\n            logger: init.logger,\n        });\n    }\n    else if (!ssoStartUrl || !ssoAccountId || !ssoRegion || !ssoRoleName) {\n        throw new CredentialsProviderError(\"Incomplete configuration. The fromSSO() argument hash must include \" +\n            '\"ssoStartUrl\", \"ssoAccountId\", \"ssoRegion\", \"ssoRoleName\"', { tryNextLink: false, logger: init.logger });\n    }\n    else {\n        return resolveSSOCredentials({\n            ssoStartUrl,\n            ssoSession,\n            ssoAccountId,\n            ssoRegion,\n            ssoRoleName,\n            ssoClient,\n            clientConfig: init.clientConfig,\n            parentClientConfig: init.parentClientConfig,\n            profile: profileName,\n            filepath: init.filepath,\n            configFilepath: init.configFilepath,\n            ignoreCache: init.ignoreCache,\n            logger: init.logger,\n        });\n    }\n};\n","export const isSsoProfile = (arg) => arg &&\n    (typeof arg.sso_start_url === \"string\" ||\n        typeof arg.sso_account_id === \"string\" ||\n        typeof arg.sso_session === \"string\" ||\n        typeof arg.sso_region === \"string\" ||\n        typeof arg.sso_role_name === \"string\");\n","import { CredentialsProviderError } from \"@smithy/property-provider\";\nexport const validateSsoProfile = (profile, logger) => {\n    const { sso_start_url, sso_account_id, sso_region, sso_role_name } = profile;\n    if (!sso_start_url || !sso_account_id || !sso_region || !sso_role_name) {\n        throw new CredentialsProviderError(`Profile is configured with invalid SSO credentials. Required parameters \"sso_account_id\", ` +\n            `\"sso_region\", \"sso_role_name\", \"sso_start_url\". Got ${Object.keys(profile).join(\", \")}\\nReference: https://docs.aws.amazon.com/cli/latest/userguide/cli-configure-sso.html`, { tryNextLink: false, logger });\n    }\n    return profile;\n};\n"],"names":["SHOULD_FAIL_CREDENTIAL_CHAIN","resolveSSOCredentials","async","ssoStartUrl","ssoSession","ssoAccountId","ssoRegion","ssoRoleName","ssoClient","clientConfig","parentClientConfig","profile","filepath","configFilepath","ignoreCache","logger","token","refreshMessage","_token","accessToken","expiresAt","Date","expiration","toISOString","e","CredentialsProviderError","C","message","tryNextLink","getSSOTokenFromFile","getTime","now","SSOClient","GetRoleCredentialsCommand","sso","Object","assign","region","userAgentAppId","ssoResp","send","accountId","roleName","roleCredentials","accessKeyId","secretAccessKey","sessionToken","credentialScope","credentials","setCredentialFeature","fromSSO","init","callerClientConfig","debug","profileName","getProfileName","parseKnownFiles","arg","sso_start_url","sso_account_id","sso_session","sso_region","sso_role_name","session","loadSsoSessionData","conflictMsg","keys","join","validateSsoProfile"],"ignoreList":[],"sourceRoot":""}