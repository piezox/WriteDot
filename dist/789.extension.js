"use strict";exports.id=789,exports.ids=[789],exports.modules={2789:(e,n,r)=>{r.d(n,{fromIni:()=>_});var o=r(1626),t=r(6437),i=r(3052),s=r(244),a=r(8062);const l=e=>(0,s.g)(e,"CREDENTIALS_PROFILE_NAMED_PROVIDER","p"),c=e=>!e.role_arn&&!!e.credential_source,d=e=>Boolean(e)&&"object"==typeof e&&"string"==typeof e.aws_access_key_id&&"string"==typeof e.aws_secret_access_key&&["undefined","string"].indexOf(typeof e.aws_session_token)>-1&&["undefined","string"].indexOf(typeof e.aws_account_id)>-1,g=async(e,n)=>{n?.logger?.debug("@aws-sdk/credential-provider-ini - resolveStaticCredentials");const r={accessKeyId:e.aws_access_key_id,secretAccessKey:e.aws_secret_access_key,sessionToken:e.aws_session_token,...e.aws_credential_scope&&{credentialScope:e.aws_credential_scope},...e.aws_account_id&&{accountId:e.aws_account_id}};return(0,s.g)(r,"CREDENTIALS_PROFILE","n")},f=async(e,n,o,_={},u=!1)=>{const p=n[e];if(Object.keys(_).length>0&&d(p))return g(p,o);if(u||((e,{profile:n="default",logger:r}={})=>Boolean(e)&&"object"==typeof e&&"string"==typeof e.role_arn&&["undefined","string"].indexOf(typeof e.role_session_name)>-1&&["undefined","string"].indexOf(typeof e.external_id)>-1&&["undefined","string"].indexOf(typeof e.mfa_serial)>-1&&(((e,{profile:n,logger:r})=>{const o="string"==typeof e.source_profile&&void 0===e.credential_source;return o&&r?.debug?.(`    ${n} isAssumeRoleWithSourceProfile source_profile=${e.source_profile}`),o})(e,{profile:n,logger:r})||((e,{profile:n,logger:r})=>{const o="string"==typeof e.credential_source&&void 0===e.source_profile;return o&&r?.debug?.(`    ${n} isCredentialSourceProfile credential_source=${e.credential_source}`),o})(e,{profile:n,logger:r})))(p,{profile:e,logger:o.logger}))return(async(e,n,o,d={},g)=>{o.logger?.debug("@aws-sdk/credential-provider-ini - resolveAssumeRoleCredentials (STS)");const f=n[e],{source_profile:_,region:u}=f;if(!o.roleAssumer){const{getDefaultRoleAssumer:e}=await r.e(757).then(r.bind(r,757));o.roleAssumer=e({...o.clientConfig,credentialProviderLogger:o.logger,parentClientConfig:{...o?.parentClientConfig,region:u??o?.parentClientConfig?.region}},o.clientPlugins)}if(_&&_ in d)throw new i.C(`Detected a cycle attempting to resolve credentials for profile ${(0,t.Bz)(o)}. Profiles visited: `+Object.keys(d).join(", "),{logger:o.logger});o.logger?.debug("@aws-sdk/credential-provider-ini - finding credential resolver using "+(_?`source_profile=[${_}]`:`profile=[${e}]`));const p=_?g(_,n,o,{...d,[_]:!0},c(n[_]??{})):(await((e,n,o)=>{const t={EcsContainer:async e=>{const{fromHttp:n}=await r.e(703).then(r.bind(r,8703)),{fromContainerMetadata:t}=await r.e(897).then(r.bind(r,7897));return o?.debug("@aws-sdk/credential-provider-ini - credential_source is EcsContainer"),async()=>(0,a.c)(n(e??{}),t(e))().then(l)},Ec2InstanceMetadata:async e=>{o?.debug("@aws-sdk/credential-provider-ini - credential_source is Ec2InstanceMetadata");const{fromInstanceMetadata:n}=await r.e(897).then(r.bind(r,7897));return async()=>n(e)().then(l)},Environment:async e=>{o?.debug("@aws-sdk/credential-provider-ini - credential_source is Environment");const{fromEnv:n}=await r.e(677).then(r.bind(r,677));return async()=>n(e)().then(l)}};if(e in t)return t[e];throw new i.C(`Unsupported credential source in profile ${n}. Got ${e}, expected EcsContainer or Ec2InstanceMetadata or Environment.`,{logger:o})})(f.credential_source,e,o.logger)(o))();if(c(f))return p.then(e=>(0,s.g)(e,"CREDENTIALS_PROFILE_SOURCE_PROFILE","o"));{const n={RoleArn:f.role_arn,RoleSessionName:f.role_session_name||`aws-sdk-js-${Date.now()}`,ExternalId:f.external_id,DurationSeconds:parseInt(f.duration_seconds||"3600",10)},{mfa_serial:r}=f;if(r){if(!o.mfaCodeProvider)throw new i.C(`Profile ${e} requires multi-factor authentication, but no MFA code callback was provided.`,{logger:o.logger,tryNextLink:!1});n.SerialNumber=r,n.TokenCode=await o.mfaCodeProvider(r)}const t=await p;return o.roleAssumer(t,n).then(e=>(0,s.g)(e,"CREDENTIALS_PROFILE_SOURCE_PROFILE","o"))}})(e,n,o,_,f);if(d(p))return g(p,o);if(y=p,Boolean(y)&&"object"==typeof y&&"string"==typeof y.web_identity_token_file&&"string"==typeof y.role_arn&&["undefined","string"].indexOf(typeof y.role_session_name)>-1)return(async(e,n)=>r.e(819).then(r.bind(r,7819)).then(({fromTokenFile:r})=>r({webIdentityTokenFile:e.web_identity_token_file,roleArn:e.role_arn,roleSessionName:e.role_session_name,roleAssumerWithWebIdentity:n.roleAssumerWithWebIdentity,logger:n.logger,parentClientConfig:n.parentClientConfig})().then(e=>(0,s.g)(e,"CREDENTIALS_PROFILE_STS_WEB_ID_TOKEN","q"))))(p,o);var y;if((e=>Boolean(e)&&"object"==typeof e&&"string"==typeof e.credential_process)(p))return(async(e,n)=>r.e(109).then(r.bind(r,5109)).then(({fromProcess:r})=>r({...e,profile:n})().then(e=>(0,s.g)(e,"CREDENTIALS_PROFILE_PROCESS","v"))))(o,e);if((e=>e&&("string"==typeof e.sso_start_url||"string"==typeof e.sso_account_id||"string"==typeof e.sso_session||"string"==typeof e.sso_region||"string"==typeof e.sso_role_name))(p))return await(async(e,n,o={})=>{const{fromSSO:t}=await r.e(781).then(r.bind(r,2781));return t({profile:e,logger:o.logger,parentClientConfig:o.parentClientConfig,clientConfig:o.clientConfig})().then(e=>n.sso_session?(0,s.g)(e,"CREDENTIALS_PROFILE_SSO","r"):(0,s.g)(e,"CREDENTIALS_PROFILE_SSO_LEGACY","t"))})(e,p,o);throw new i.C(`Could not resolve credentials using profile: [${e}] in configuration/credentials file(s).`,{logger:o.logger})},_=(e={})=>async({callerClientConfig:n}={})=>{const r={...e,parentClientConfig:{...n,...e.parentClientConfig}};r.logger?.debug("@aws-sdk/credential-provider-ini - fromIni");const i=await(0,o.Y)(r);return f((0,t.Bz)({profile:e.profile??n?.profile}),i,r)}}};