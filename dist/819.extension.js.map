{"version":3,"file":"819.extension.js","mappings":"uHAEO,MAAMA,EAA0B,CACnCC,cAAa,IACF,KAEX,aAAAC,CAAcC,EAAMC,GAChB,KAAcD,GAAQE,QAAQC,QAAQF,EAC1C,EACAG,eAAc,IACH,IAEX,cAAAC,CAAeC,EAAIL,GACf,IAAeK,GAAML,CACzB,E,yFCdG,MCKDM,EAAiB,8BAGVC,EAAgB,CAACC,EAAO,CAAC,IAAMC,MAAOC,IAC/CF,EAAKG,QAAQC,MAAM,6DACnB,MAAMC,EAAuBL,GAAMK,sBAAwBC,QAAQC,IAAIT,GACjEU,EAAUR,GAAMQ,SAAWF,QAAQC,IAAgB,aACnDE,EAAkBT,GAAMS,iBAAmBH,QAAQC,IAAyB,sBAClF,IAAKF,IAAyBG,EAC1B,MAAM,IAAIE,EAAAC,EAAyB,2CAA4C,CAC3ER,OAAQH,EAAKG,SAGrB,MAAMS,ODlBkB,CAACZ,GAASC,MAAOC,IACzCF,EAAKG,QAAQC,MAAM,4DACnB,MAAM,QAAEI,EAAO,gBAAEC,EAAe,iBAAEI,EAAgB,WAAEC,EAAU,WAAEC,EAAU,OAAEC,EAAM,gBAAEC,GAAoBjB,EACxG,IAAI,2BAAEkB,GAA+BlB,EACrC,IAAKkB,EAA4B,CAC7B,MAAM,qCAAEC,SAA+C,6BACvDD,EAA6BC,EAAqC,IAC3DnB,EAAKoB,aACRC,yBAA0BrB,EAAKG,OAC/BmB,mBAAoB,IACbpB,GAAuBqB,sBACvBvB,EAAKsB,qBAEbtB,EAAKwB,cACZ,CACA,OAAON,EAA2B,CAC9BO,QAASjB,EACTkB,gBAAiBjB,GAAmB,sBAAsBkB,KAAKC,QAC/DC,iBAAkBhB,EAClBiB,WAAYhB,EACZiB,WAAYhB,EACZiB,OAAQhB,EACRiB,gBAAiBhB,KCJKiB,CAAa,IAChClC,EACHa,iBAAkBzB,EAAA,GAAyBO,mBAAmBU,KAC1D,IAAA8B,cAAa9B,EAAsB,CAAE+B,SAAU,UACnD5B,UACAC,mBALsByB,CAMvBhC,GAIH,OAHIG,IAAyBC,QAAQC,IAAIT,KACrC,EAAAuC,EAAA,GAAqBzB,EAAa,wCAAyC,KAExEA,E","sources":["webpack://writedot/./node_modules/@smithy/shared-ini-file-loader/dist-es/externalDataInterceptor.js","webpack://writedot/./node_modules/@aws-sdk/credential-provider-web-identity/dist-es/fromWebToken.js","webpack://writedot/./node_modules/@aws-sdk/credential-provider-web-identity/dist-es/fromTokenFile.js"],"sourcesContent":["import { tokenIntercept } from \"./getSSOTokenFromFile\";\nimport { fileIntercept } from \"./readFile\";\nexport const externalDataInterceptor = {\n    getFileRecord() {\n        return fileIntercept;\n    },\n    interceptFile(path, contents) {\n        fileIntercept[path] = Promise.resolve(contents);\n    },\n    getTokenRecord() {\n        return tokenIntercept;\n    },\n    interceptToken(id, contents) {\n        tokenIntercept[id] = contents;\n    },\n};\n","export const fromWebToken = (init) => async (awsIdentityProperties) => {\n    init.logger?.debug(\"@aws-sdk/credential-provider-web-identity - fromWebToken\");\n    const { roleArn, roleSessionName, webIdentityToken, providerId, policyArns, policy, durationSeconds } = init;\n    let { roleAssumerWithWebIdentity } = init;\n    if (!roleAssumerWithWebIdentity) {\n        const { getDefaultRoleAssumerWithWebIdentity } = await import(\"@aws-sdk/nested-clients/sts\");\n        roleAssumerWithWebIdentity = getDefaultRoleAssumerWithWebIdentity({\n            ...init.clientConfig,\n            credentialProviderLogger: init.logger,\n            parentClientConfig: {\n                ...awsIdentityProperties?.callerClientConfig,\n                ...init.parentClientConfig,\n            },\n        }, init.clientPlugins);\n    }\n    return roleAssumerWithWebIdentity({\n        RoleArn: roleArn,\n        RoleSessionName: roleSessionName ?? `aws-sdk-js-session-${Date.now()}`,\n        WebIdentityToken: webIdentityToken,\n        ProviderId: providerId,\n        PolicyArns: policyArns,\n        Policy: policy,\n        DurationSeconds: durationSeconds,\n    });\n};\n","import { setCredentialFeature } from \"@aws-sdk/core/client\";\nimport { CredentialsProviderError } from \"@smithy/property-provider\";\nimport { externalDataInterceptor } from \"@smithy/shared-ini-file-loader\";\nimport { readFileSync } from \"fs\";\nimport { fromWebToken } from \"./fromWebToken\";\nconst ENV_TOKEN_FILE = \"AWS_WEB_IDENTITY_TOKEN_FILE\";\nconst ENV_ROLE_ARN = \"AWS_ROLE_ARN\";\nconst ENV_ROLE_SESSION_NAME = \"AWS_ROLE_SESSION_NAME\";\nexport const fromTokenFile = (init = {}) => async (awsIdentityProperties) => {\n    init.logger?.debug(\"@aws-sdk/credential-provider-web-identity - fromTokenFile\");\n    const webIdentityTokenFile = init?.webIdentityTokenFile ?? process.env[ENV_TOKEN_FILE];\n    const roleArn = init?.roleArn ?? process.env[ENV_ROLE_ARN];\n    const roleSessionName = init?.roleSessionName ?? process.env[ENV_ROLE_SESSION_NAME];\n    if (!webIdentityTokenFile || !roleArn) {\n        throw new CredentialsProviderError(\"Web identity configuration not specified\", {\n            logger: init.logger,\n        });\n    }\n    const credentials = await fromWebToken({\n        ...init,\n        webIdentityToken: externalDataInterceptor?.getTokenRecord?.()[webIdentityTokenFile] ??\n            readFileSync(webIdentityTokenFile, { encoding: \"ascii\" }),\n        roleArn,\n        roleSessionName,\n    })(awsIdentityProperties);\n    if (webIdentityTokenFile === process.env[ENV_TOKEN_FILE]) {\n        setCredentialFeature(credentials, \"CREDENTIALS_ENV_VARS_STS_WEB_ID_TOKEN\", \"h\");\n    }\n    return credentials;\n};\n"],"names":["externalDataInterceptor","getFileRecord","interceptFile","path","contents","Promise","resolve","getTokenRecord","interceptToken","id","ENV_TOKEN_FILE","fromTokenFile","init","async","awsIdentityProperties","logger","debug","webIdentityTokenFile","process","env","roleArn","roleSessionName","CredentialsProviderError","C","credentials","webIdentityToken","providerId","policyArns","policy","durationSeconds","roleAssumerWithWebIdentity","getDefaultRoleAssumerWithWebIdentity","clientConfig","credentialProviderLogger","parentClientConfig","callerClientConfig","clientPlugins","RoleArn","RoleSessionName","Date","now","WebIdentityToken","ProviderId","PolicyArns","Policy","DurationSeconds","fromWebToken","readFileSync","encoding","setCredentialFeature"],"ignoreList":[],"sourceRoot":""}