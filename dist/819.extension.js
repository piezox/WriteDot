"use strict";exports.id=819,exports.ids=[819],exports.modules={3297:(e,o,n)=>{n.d(o,{Z:()=>t});var i=n(4757),r=n(8845);const t={getFileRecord:()=>r.Jj,interceptFile(e,o){r.Jj[e]=Promise.resolve(o)},getTokenRecord:()=>i.a,interceptToken(e,o){i.a[e]=o}}},7819:(e,o,n)=>{n.d(o,{fromTokenFile:()=>d});var i=n(244),r=n(3052),t=n(3297),s=n(9896);const l="AWS_WEB_IDENTITY_TOKEN_FILE",d=(e={})=>async o=>{e.logger?.debug("@aws-sdk/credential-provider-web-identity - fromTokenFile");const d=e?.webIdentityTokenFile??process.env[l],c=e?.roleArn??process.env.AWS_ROLE_ARN,a=e?.roleSessionName??process.env.AWS_ROLE_SESSION_NAME;if(!d||!c)throw new r.C("Web identity configuration not specified",{logger:e.logger});const g=await(e=>async o=>{e.logger?.debug("@aws-sdk/credential-provider-web-identity - fromWebToken");const{roleArn:i,roleSessionName:r,webIdentityToken:t,providerId:s,policyArns:l,policy:d,durationSeconds:c}=e;let{roleAssumerWithWebIdentity:a}=e;if(!a){const{getDefaultRoleAssumerWithWebIdentity:i}=await n.e(757).then(n.bind(n,757));a=i({...e.clientConfig,credentialProviderLogger:e.logger,parentClientConfig:{...o?.callerClientConfig,...e.parentClientConfig}},e.clientPlugins)}return a({RoleArn:i,RoleSessionName:r??`aws-sdk-js-session-${Date.now()}`,WebIdentityToken:t,ProviderId:s,PolicyArns:l,Policy:d,DurationSeconds:c})})({...e,webIdentityToken:t.Z?.getTokenRecord?.()[d]??(0,s.readFileSync)(d,{encoding:"ascii"}),roleArn:c,roleSessionName:a})(o);return d===process.env[l]&&(0,i.g)(g,"CREDENTIALS_ENV_VARS_STS_WEB_ID_TOKEN","h"),g}}};